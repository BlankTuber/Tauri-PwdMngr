<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Password Manager - Export/Import</title>

        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/export-import.css" />
        <script src="/js/exportImport.js"></script>
    </head>
    <body>
        <h1>Export & Import Passwords</h1>
        <div class="ei-container">
            <div class="ei-tabs">
                <button class="ei-tab-btn active" onclick="switchTab('export')">
                    Export
                </button>
                <button class="ei-tab-btn" onclick="switchTab('import')">
                    Import
                </button>
            </div>

            <div id="exportTab" class="ei-tab-content active">
                <div class="ei-export-options">
                    <div class="ei-format-selector">
                        <label>Export Format</label>
                        <select id="exportFormat" class="ei-select">
                            <option value="json">JSON</option>
                            <option value="csv">CSV</option>
                        </select>
                    </div>
                    <div class="ei-action-buttons">
                        <button
                            onclick="selectAll()"
                            class="ei-btn ei-btn-secondary"
                        >
                            Select All
                        </button>
                        <button
                            onclick="deselectAll()"
                            class="ei-btn ei-btn-secondary"
                        >
                            Deselect All
                        </button>
                        <button
                            id="exportBtn"
                            onclick="exportPasswords()"
                            class="ei-btn ei-btn-primary"
                        >
                            Export Selected
                        </button>
                    </div>
                </div>
                <div class="ei-password-list">
                    <div class="ei-list-header">
                        <div class="ei-checkbox-col">Select</div>
                        <div class="ei-website-col">Website</div>
                        <div class="ei-username-col">Username</div>
                        <div class="ei-date-col">Last Updated</div>
                    </div>
                    <div id="passwordList"></div>
                </div>
            </div>

            <div id="importTab" class="ei-tab-content">
                <div class="ei-import-container">
                    <div class="ei-file-upload">
                        <label for="importFile">Select File to Import</label>
                        <input
                            type="file"
                            id="importFile"
                            accept=".json,.csv"
                            class="ei-file-input"
                        />
                    </div>
                    <div class="ei-format-info">
                        <p>Supported formats: JSON, CSV</p>
                        <p>
                            CSV headers must include: website, username,
                            password, website_url (optional), notes (optional)
                        </p>
                    </div>
                    <button
                        id="importBtn"
                        onclick="importPasswords()"
                        class="ei-btn ei-btn-primary"
                    >
                        Import Passwords
                    </button>
                </div>
                <div id="importPreview"></div>
            </div>
        </div>
        <p id="statusMessage" class="ei-status"></p>
        <div class="ei-bottom-nav">
            <button onclick="window.location.href='/'" class="ei-btn">
                Back to Dashboard
            </button>
        </div>
    </body>
</html>
